<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Философский квиз</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* A little extra style for transitions */
        .screen { transition: opacity 0.25s ease-in-out; }
        .hidden { display: none; opacity: 0; }
        .visible { display: block; opacity: 1; }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen font-sans">

<div class="bg-white p-6 sm:p-10 rounded-xl shadow-2xl w-full max-w-3xl min-h-[480px] flex flex-col">

    <!-- Start Screen -->
    <div id="start-screen" class="screen visible">
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-3 text-center">Философский квиз</h1>
        <p class="text-sm text-gray-600 mb-6 text-center">
            Добро пожаловать! Квиз разбивается на блоки (по умолчанию 20 вопросов в блоке). Блоков будет столько, сколько требуется для всех вопросов.
            Работа над ошибками не влияет на общий счёт. Введите имя игрока, чтобы участвовать в общем зачёте.
        </p>

        <div class="grid gap-4 sm:grid-cols-2 mb-6">
            <div>
                <label class="text-sm font-medium text-gray-700">Имя игрока</label>
                <input id="player-name" type="text" placeholder="Ваше имя" class="mt-1 w-full p-3 border rounded-md" />
            </div>

            <div>
                <label class="text-sm font-medium text-gray-700">Параметры</label>
                <div class="mt-1 flex gap-2">
                    <label class="text-sm text-gray-600 flex items-center gap-2">
                        <input id="block-size-input" type="number" min="5" max="50" value="20" class="w-20 p-2 border rounded" />
                        Вопросов в блоке
                    </label>
                </div>
                <p class="text-xs text-gray-500 mt-2">Измените, если хотите другой размер блока (по умолчанию 20).</p>
            </div>
        </div>

        <div class="mb-6">
            <button id="start-quiz-btn" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition">
                Начать квиз (Блок 1)
            </button>
        </div>

        <div class="mb-4">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Таблица лидеров (локально)</h3>
            <div id="leaderboard" class="bg-gray-50 p-3 rounded border max-h-40 overflow-auto text-sm"></div>
            <div class="flex gap-2 mt-3">
                <button id="refresh-leaderboard" class="px-3 py-2 bg-gray-200 rounded hover:bg-gray-300 text-sm">Обновить</button>
                <button id="reset-leaderboard" class="px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 text-sm">Сбросить счёт</button>
            </div>
            <p class="text-xs text-gray-500 mt-2">
                Счёт хранится в localStorage браузера — чтобы соревноваться с друзьями на одном устройстве, каждый вводит своё имя.
            </p>
        </div>

        <div class="text-right text-xs text-gray-400">Блоков и вопросов будет столько, сколько нужно по объёму списка вопросов.</div>
    </div>

    <!-- Quiz Screen -->
    <div id="quiz-screen" class="screen hidden">
        <div class="flex items-center justify-between mb-3">
            <div class="text-sm font-semibold text-gray-600" id="progress-text"></div>
            <div class="text-sm text-gray-700">Игрок: <span id="current-player" class="font-medium"></span> — очков в этой сессии: <span id="session-score">0</span></div>
        </div>

        <h2 id="question-text" class="text-xl sm:text-2xl font-semibold text-gray-900 mb-4 min-h-[72px]"></h2>

        <div id="options-container" class="grid grid-cols-1 gap-3 mb-4"></div>

        <div class="flex gap-3">
            <button id="quit-btn" class="flex-1 bg-red-500 text-white py-2 rounded hover:bg-red-600">Выйти в меню</button>
            <button id="next-block-btn" class="flex-1 bg-green-600 text-white py-2 rounded hover:bg-green-700 hidden">Перейти к следующему блоку</button>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="results-screen" class="screen hidden text-center">
        <h2 id="results-title" class="text-2xl font-bold text-gray-800 mb-2"></h2>
        <p id="results-message" class="text-gray-600 mb-4"></p>

        <div id="results-controls" class="grid gap-3">
            <button id="results-next-btn" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition">Далее</button>
            <button id="results-restart-btn" class="w-full bg-gray-200 text-gray-800 py-3 rounded-lg hover:bg-gray-300 hidden">Начать заново</button>
        </div>

        <div class="mt-6 text-left">
            <h3 class="font-semibold">Текущая сессия</h3>
            <div id="session-summary" class="bg-gray-50 p-3 rounded border text-sm"></div>
        </div>
    </div>

</div>

<script type="module">
    /* ------------------------------------------------------------------
       Новые вопросы (добавлены сверху) — те, которые вы прислали в последнем сообщении.
       Они будут добавлены в начало общего списка вопросов.
       ------------------------------------------------------------------ */
    const prependQuestions = [
        { question: "Who said, 'There is beauty in everything, but not everyone will see'?", options: ["Confucius", "Socrates", "Democritus", "Heraclitus", "Thales"], answer: 0 },
        { question: "A person who behaves in a way that is acceptable by most people and who avoids doing things that could be considered different or unusual:", options: ["proponent", "supporter", "conformist", "follower", "adherent"], answer: 2 },
        { question: "The term 'axial time' was proposed by:", options: ["M. Heidegger", "K. Popper", "J. Derrida", "A. Camus", "K. Jaspers"], answer: 4 },
        { question: "The author of the concepts of 'philosophical belief', 'axial time':", options: ["M. Buber", "M. Heidegger", "A. Camus", "K. Jaspers", "J.-P. Sartre"], answer: 3 },
        { question: "Author of the work 'The Revolt of the Masses':", options: ["A. Schweitzer", "E. Fromm", "E. Toffler", "Ortega y Gasset", "K. Jaspers"], answer: 3 },
        { question: "The author of the saying 'Freedom is a conscious necessity':", options: ["Fr. Bacon", "J. Locke", "B. Spinoza", "G.F. Leibniz", "R. Descartes"], answer: 2 },
        { question: "The author of conception 'the end of history':", options: ["F. Fukuyama", "M. Weber", "A. Toynbee", "O. Spengler", "D. Bell"], answer: 0 },
        { question: "'Nothing is morally right or wrong because there are no moral features in this world; thus, no moral judgments are true':", options: ["moral objectivism", "moral nihilism", "moral relativism", "moral eliminativism", "moral ignorance"], answer: 1 },
        { question: "Who introduced the concept of 'archetype' into psychoanalysis:", options: ["K. Jung", "A. Schopenhauer", "E. Fromm", "F. Nietzsche", "Z. Freud"], answer: 0 },
        { question: "The value aspects expresses:", options: ["Epistemology", "Ontology", "Epistemology", "Axiology", "Futurology"], answer: 3 },
        { question: "The concept that reflects the interaction of nature and society, as well as emphasizes the role of science and the human mind:", options: ["biosphere", "technosphere", "geosphere", "noosphere", "sociosphere"], answer: 3 },
        { question: "Author of the work 'Existentialism is humanism':", options: ["A. Camus", "M. Heidegger", "J.-P. Sartre", "K. Jaspers", "G.O. Marcel"], answer: 2 },
        { question: "'I do not agree with what you have to say, but I’ll defend to the death your right to say it', said:", options: ["Aristotle", "Cicero", "Voltaire", "Abai", "Socrates"], answer: 2 },
        { question: "What was dialectics in antique philosophy?", options: ["the development of the 'absolute idea'", "alternative style of thinking", "the art of debate", "the study of the objective world", "the theory of scientific cognition"], answer: 2 },
        { question: "In the philosophy of science, the problem of distinguishing the science and non-science:", options: ["proliferation", "falsification", "verification", "demarcation", "negative heuristics"], answer: 3 },
        { question: "Which is the Epistemological question?", options: ["How can we prove our answers?", "Do divine commands make right acts right, or are their rightness based on something else?", "What sorts of things exist?", "Is some art unethical?", "What is happiness?"], answer: 0 },
        { question: "Lewis Mumford considers a strongly hierarchical, technocratic organization of society as…", options: ["technopark", "technicism", "compunication", "megamachine", "coordination"], answer: 3 },
        { question: "Thinker, who linked the origin of capitalism with the protestant ethics:", options: ["M. Foucault", "F. Engels", "M. Weber", "K. Marx", "I. Kant"], answer: 2 },
        { question: "The purification and purgation of emotions through dramatic art, or any extreme emotional state that results in renewal and restoration:", options: ["phronesis", "mimesis", "ataraxy", "catalepsy", "catharsis"], answer: 4 },
        { question: "Who claimed 'God is dead and we killed him'?", options: ["Marx", "Nietzsche", "Freud", "Kierkegaard", "Schopenhauer"], answer: 1 },
        { question: "The ancient Greek philosopher Pythagoras stated:", options: ["All things are similar in number", "War is the father of everything and the mother of everything", "Know thyself", "I know that I don't know anything", "Everything flows, everything changes"], answer: 0 },
        { question: "The ethical concept of Confucianism, identifying the positive qualities of a person:", options: ["a noble person", "short man", "an official", "warlord", "statesman"], answer: 0 },
        { question: "Representative of the Milesian school:", options: ["Socrates", "Democritus", "Heraclitus", "Diogenes", "Thales"], answer: 4 },
        { question: "Created the heliocentric system:", options: ["Nicolaus Copernicus", "Giordano Bruno", "Nicholas of Cusa", "Galileo Galilei", "Tycho Brahe"], answer: 0 },
        { question: "Recognition of the plurality of substance:", options: ["monism", "Pluralism", "dualism", "Deism", "Rationalism"], answer: 1 },
        { question: "The sphere of philosophical knowledge about human being:", options: ["Anthropology", "epistemology", "axiology", "ontology", "logic"], answer: 0 },
        { question: "An ancient philosopher who believed that the material world consists of atoms:", options: ["Aristotle", "Pyrrho", "Zeno", "Democritus", "Heraclitus"], answer: 3 },
        { question: "Author of the doctrine of the four truths:", options: ["Siddhartha Gautama", "Confucius", "Patanjali", "Lao Tzu", "Mahavira"], answer: 0 },
        { question: "Adam Bol - the principle first proclaimed:", options: ["Baitursynov", "Sh. Kudaiberdiev", "Sh. Ualikhanov", "Bukeikhanov", "A. Kunanbaev"], answer: 4 },
        { question: "Indicate the law of dialectics:", options: ["the law of gravity", "Law of conservation of matter and energy", "the law of the excluded middle", "The law of unity and struggle of opposites", "Law of Sufficient Reason"], answer: 3 },
        { question: "Mayeutics is:", options: ["The ability to cleverly debate", "The art of having a conversation, an argument", "Socratic method of finding the truth", "The ideal of physical and moral perfection", "The beginning of being"], answer: 2 },
        { question: "Man is the measure of all things - believes:", options: ["Parmenides", "Protagoras", "Socrates", "Democritus", "Plato"], answer: 1 },
        { question: "Basic laws and categories of formal logic discovered:", options: ["Socrates", "Empedocles", "Aristotle", "Plato", "Plotinus"], answer: 2 },
        { question: "Forms of worldview", options: ["Consciousness, thinking, mind", "Myth, religion, philosophy", "God, nature, society", "Ontology, epistemology, axiology", "Man, person, individual"], answer: 1 },
        { question: "Know yourself - said:", options: ["Confucius", "Heraclitus", "Protagoras", "Parmenides", "Socrates"], answer: 4 },
        { question: "Philosopher and theologian who put forward five proofs for the existence of God:", options: ["Aurelius Augustine", "William of Ockham", "Roger Bacon", "Thomas Aquinas", "Anselm of Canterbury"], answer: 3 },
        { question: "Who was called the 'Second Teacher' in world philosophy:", options: ["Al-Ghazali", "Al-Farabi", "Al-Biruni", "Al-Khwarizmi", "Al-Kindi"], answer: 1 },
        { question: "Philosophical direction, recognizing one beginning of the world:", options: ["dualism", "Agnosticism", "mechanism", "Monism", "Pluralism"], answer: 3 },
        { question: "Invisible, omnipresent law of nature, society, human behavior and thinking, the path:", options: ["Lee", "Fa", "Siao", "Zhen", "Tao"], answer: 4 },
        { question: "The third law of dialectics:", options: ["the law of gravity", "Law of conservation of matter and energy", "The law of the excluded middle", "Law of sufficient reason", "The law of negation of negation"], answer: 4 },
        { question: "Philosophical doctrine that denies the fundamental possibility of knowing the world:", options: ["skepticism", "Agnosticism", "sensationalism", "Anthropologism", "Atheism"], answer: 1 },
        { question: "A thinker who claims that a philosopher should be at the head of the state:", options: ["Aristotle", "Democritus", "Heraclitus", "Epicurus.", "Plato"], answer: 4 },
        { question: "What is the meaning of the term Philosophy?", options: ["Love of wisdom", "Love of Idea", "Love of thinking", "Love of Science", "Love of Truth"], answer: 0 },
        { question: "The first form of worldview:", options: ["Religion", "Myth", "Philosophy", "Art", "morality"], answer: 1 },
        { question: "A philosophical method based on decomposition phenomenon into its constituent parts and sides:", options: ["Analysis", "Synthesis", "Dialectic", "Metaphysics", "Eclecticism"], answer: 0 },
        { question: "A philosophical method based on the consideration of things, and processes from two opposite points of view", options: ["Analysis", "Synthesis", "Dialectics", "Metaphysics", "Eclecticism"], answer: 2 },
        { question: "Meaning of Taoist principle 'Wu-wei'", options: ["Non-resistance to evil", "Action", "Discipline and order in society", "Non-action", "Infinity of the Universe"], answer: 3 },
        { question: "Teachings about Being:", options: ["Epistemology", "Axiology", "Anthology", "Anthropology", "Ontology"], answer: 4 },
        { question: "What philosophical direction “Space and time are forms of our perception” belong to:", options: ["Materialism", "Objective idealism", "Subjective idealism", "dialectical materialism", "mechanistic materialism"], answer: 2 },
        { question: "Two main parts of philosophy:", options: ["Sophistry, eclecticism, dogmatism", "Monism, dualism, pluralism", "Sociology, political science, cultural studies", "Ontology, Gnoseology", "Mythology, religion, philosophy"], answer: 3 },
        { question: "Author of Utopia.", options: ["T. More", "T. Campanella", "N. Machiavelli", "J. Bruno", "N. Copernicus"], answer: 0 },
        { question: "Teaching about knowledge:", options: ["ontology", "Gnoseology", "metaphysics", "Axiology", "Anthropology"], answer: 1 },
        { question: "Recognition of two substances at the foundation of being:", options: ["Pluralism", "Dualism", "Monism", "Conventionalism", "Parallelism"], answer: 1 },
        { question: "An outstanding representative of medieval scholasticism:", options: ["Al-Kindi", "Aurelius Augustine", "Thomas Aquinas", "Ibn Sina", "Al-Farabi"], answer: 2 },
        { question: "Founder of Taoism:", options: ["Confucius", "Lao Tzu", "Shang Di", "Mencius", "Huang Di"], answer: 1 },
        { question: "What does humanism mean?", options: ["philanthropy", "love for god", "love for knowledge", "love of wisdom", "love for truth"], answer: 0 },
        { question: "What is the principle of 'Siao'", options: ["philanthropy", "etiquette", "energy", "servility", "Respect for elders"], answer: 4 },
        { question: "What does Maya mean", options: ["Illusion", "rebirth of souls", "fate", "action", "practice"], answer: 0 },
        { question: "What does Buddha mean in Sanskrit?", options: ["Dark", "Smart", "Enlightened", "Universal", "Statue"], answer: 2 },
        { question: "Which is the branch of philosophy that studies issues concerning art and beauty?", options: ["Aesthetics", "Epistemology", "Logic", "Metaphysics", "Moral"], answer: 0 },
        { question: "«Wu-Wei», means something like", options: ["non-action", "action", "the virtue", "moral disposition to do good", "the ability to see what is right and wrong"], answer: 0 },
        { question: "In the schools of Indian philosophical thought what means action", options: ["Karma", "Dharma", "Samsara", "Reincarnation", "Nirvana"], answer: 0 },
        { question: "Before the Islam important role in the spiritual culture of Qazaq, there is….", options: ["Sufism", "Tribalism", "Anarchism", "Hedonism", "Tengrism"], answer: 4 },
        { question: "Who said that “Love and justice as the attributes of God.”", options: ["Abai", "Comte", "Kierkegaard", "Nietzsche", "James"], answer: 0 },
        { question: "What does the Greek word “Logos” mean?", options: ["science", "goal", "religion", "idea", "subject"], answer: 0 },
        { question: "is something that can be said to exist", options: ["Knowledge", "Category", "Being", "Notion", "Space"], answer: 2 },
        { question: "is the branch of philosophy that studies the nature of Being", options: ["Ontology", "Neoplatonism", "Metaphysics", "Dualism", "Epistemology"], answer: 0 },
        { question: "The ability to create mental images or pictures is called …", options: ["imagination", "perception", "reflection", "consciousness", "will"], answer: 0 },
        { question: "What is common between myth, religion and philosophy:", options: ["reflection", "world outlook", "scientific approach", "rationalism", "agnosticism"], answer: 1 },
        { question: "In Hinduism, the absolute reality is designated by the concept:", options: ["atman", "moksha", "jina", "Brahman", "ahimsa"], answer: 3 },
        { question: "In Daoism adherence to the principle of “naturalness” means", options: ["following to the Dao as the law of nature and cosmos", "following to your own needs", "transforming the outer world for the better", "implementing the principle of love for the neighbor", "faith in God"], answer: 0 },
        { question: "Author of the “double-truth” theory:", options: ["Ibn-Sina", "Ibn-Rushd", "Al-Kindi", "Ibn-Arabi", "Al-Ghazali"], answer: 3 },
        { question: "The author of the expression: “thought and being are one and the same”", options: ["Plato", "Pythagoras", "Heraclitus", "Aristotle", "Parmenides"], answer: 4 },
        { question: "Ancient Greek philosophers, who took money for teaching wisdom:", options: ["atomists", "representatives of Peripatetic school", "sophists", "Socratics", "all Ancient Greek thinkers"], answer: 2 },
        { question: "“Knowledge comes only or primarily from sensory experience”:", options: ["skepticism", "rationalism", "agnosticism", "phenomenology", "empiricism"], answer: 4 },
        { question: "Transition from the general to the specific knowledge:", options: ["induction", "analysis", "deduction", "abstracting", "synthesis"], answer: 2 },
        { question: "Protagoras is the author of remark:", options: ["man is the measure of all things", "man is a social animal", "man is a bizarre creature", "man is a superman", "man is a political animal"], answer: 0 },
        { question: "Suffering and evil deal with:", options: ["ahimsa", "nirvana", "Brahmin", "moksha", "samsara"], answer: 4 },
        { question: "“Don’t harm the living, sentient beings” is the commandment of:", options: ["ahimsa", "moksha", "samsara", "karma", "nirvana"], answer: 0 },
        { question: "“Motion is unthinkable” – assumed:", options: ["Thales", "Heraclitus of Ephesus", "Zeno of Elea", "Diogenes of Sinope", "Pythagoras of Samos"], answer: 2 },
        { question: "“Maieutics” is the method of:", options: ["Plato", "Protagoras", "Socrates", "Zeno", "Heraclitus"], answer: 2 },
        { question: "According to Parmenides, being is:", options: ["eternal, invariable, united", "ideal, eternal, multiple", "the unity of the spiritual and material", "material, variable, ultimate", "invariable, plural"], answer: 0 },
        { question: "According to al-Farabi, the ideal of society:", options: ["city of the sun", "city of panic", "virtuous city", "city of ambition", "city of freedom and collectivity"], answer: 2 },
        { question: "Rational knowledge includes:", options: ["concept, judgment, conclusion", "analogy, hypothesis, ordering", "induction, deduction generalization", "intuition, reason, mind", "sensation, perception, representation"], answer: 0 },
        { question: "In ancient Greek philosophy, the impossibility of think about motion has been proven in:", options: ["Aristotelian syllogisms", "Zeno’s paradoxes", "Pythagorean proves", "Socrates’ definitions", "Plato's dialogues"], answer: 1 },
        { question: "Materialistic school in ancient Indian philosophy:", options: ["Charvaka", "Buddhism", "Yoga", "Upanishads", "Jainism"], answer: 0 },
        { question: "“Cognition is the recollection of the ideas that soul had once beheld”, affirms:", options: ["Epicurus", "Aristotle", "Plato", "Socrates", "Pythagoras"], answer: 2 },
        { question: "In Hellenistic philosophy the word “ataraxia” means:", options: ["equanimity, impassivity", "heartlessness", "fatigue, tiredness", "wisdom", "activity and creativity"], answer: 0 },
        { question: "In ancient times the concept “physis” meant:", options: ["nature", "society", "psyche", "state", "human being"], answer: 0 },
        { question: "To the question: 'What is difficult?' Thales replied:", options: ["to know God", "to know thyself", "to give advices to others", "to know the essence of things", "to overcome the need"], answer: 1 },
        { question: "Any change, transformation, and process is:", options: ["motion", "evolution", "involution", "development", "progress"], answer: 0 },
        { question: "Category, reflecting the external, sensibly perceived sides of objects and processes:", options: ["phenomenon", "image", "configuration", "profile", "shape"], answer: 0 },
        { question: "The negation of the causality principle:", options: ["determinism", "agnosticism", "indeterminism", "fatalism", "idealism"], answer: 2 },
        { question: "The science on forms, laws and ways of thinking:", options: ["logic", "axiology", "ontology", "epistemology", "logistics"], answer: 0 },
        { question: "'Everything flows', there is nothing constant in the universe, considered:", options: ["Thales", "Anaximander", "Democritus", "Heraclitus", "Protagoras"], answer: 3 },
        { question: "The expression “One cannot enter into the same river even once” is…", options: ["relativism", "sophism", "skepticism", "pessimism", "agnosticism"], answer: 0 },
        { question: "The form of empirical cognition:", options: ["judgment", "hypothesis", "observation", "syllogism", "theory"], answer: 2 },
        { question: "The basis for regulation of human behavior, according to legalism:", options: ["cruel laws", "custom", "tradition", "ritual", "morality"], answer: 0 },
        { question: "The expression “Everything I say is false” is…", options: ["truth", "sophism", "wordplay", "deception", "error"], answer: 1 },
        { question: "School of thought that questions the possibility of certainty in knowledge:", options: ["skepticism", "pessimism", "optimism", "realism", "nominalism"], answer: 0 },
        { question: "Ancient philosopher, who recognized water, earth, fire and air as a system of world’s eternal elements and forces:", options: ["Epicurus", "Empedocles", "Anaximenes", "Anaximander", "Heraclitus"], answer: 1 },
        { question: "Which Pre-Socratic philosopher claimed everything was made of atoms?", options: ["Parmenides", "Thales", "Pythagoras", "Democritus", "Heraclitus"], answer: 3 },
        { question: "What is the translation of the word “religio” from Latin?", options: ["bind, connect", "person", "faith, cult", "worshiping", "idol"], answer: 0 },
        { question: "According to .. all phenomena in the world are planned in advance and the possibility of change is rejected", options: ["fatalism", "determinism", "formalism", "indeterminism", "providentialism"], answer: 0 },
        { question: "Christian world outlook stands for the idea of creation of the world out of nothing. It is …..", options: ["Theocentrism", "Faith", "Spirituality", "Symbolism", "Creationism"], answer: 4 },
        { question: "The belief that God is present in all things of nature", options: ["Pantheism", "Syncretism", "Animism", "Theology", "Anthropology"], answer: 0 },
        { question: "View that after the death the human beings live again in other forms. What is this?", options: ["Reincarnation", "Fetishism", "Animism", "Religion", "Syncretism"], answer: 0 },
        { question: "is the belief in and worship of controlling power,", options: ["Religion", "Culture", "Science", "Art", "Game"], answer: 0 }
    ];

    /* ------------------------------------------------------------------
       Существующий список вопросов (без изменений по содержанию, он будет добавлен после prependQuestions)
       (включает все вопросы, которые были в предыдущей версии файла)
       ------------------------------------------------------------------ */
    const existingQuestions = [
        { question: "The author of the concepts of “philosophical belief”, “axial time”:", options: ["K. Jaspers", "M. Heidegger", "M. Buber", "A. Camus", "J.-P. Sartre"], answer: 0 },
        { question: "Understanding of facts, information, descriptions, which is acquired through", options: ["Knowledge", "Misunderstanding", "Stereotype", "Work", "Experience"], answer: 0 },
        { question: "The set of beliefs, values, technical means adopted by the scientific community and providing a scientific tradition.", options: ["scientific paradigms", "scientific experiments", "scientific schemes", "scientific theories", "Scientific revolutions"], answer: 0 },
        { question: "The branch of philosophy that studies the of knowledge", options: ["Neoplatonism", "Ontology", "Dualism", "Epistemology", "Metaphysics"], answer: 3 },
        { question: "A thinker whose ideas about man reflect the following judgment: \"Man is a wolf to man\":", options: ["Kant", "Hegel", "Cusa", "Hobbes", "Pascal"], answer: 3 },
        { question: "A philosophical theory, which emphasizes the existence of the individual freedom", options: ["Liberalism", "Nihilism", "Romanticism", "There is no correct answer", "Empirism"], answer: 0 },
        { question: "The principle of falsification was introduced into scientific circulation:", options: ["A. Camus", "K. Popper", "K. Jaspers", "J. Derrida", "T. Kuhn"], answer: 1 },
        { question: "What was dialectics in antique philosophy?", options: ["the study of the objective world", "the art of debate", "the development of the “absolute idea”", "the theory of scientific cognition", "alternative style of thinking"], answer: 1 },
        { question: "The author of 3 laws of dialectics?", options: ["L. Feuerbach", "J. Fichte", "I. Kant", "F. Schelling", "G. Hegel"], answer: 4 },
        { question: "The main problem of existentialism:", options: ["The human mind", "The essence of man", "Human conscience", "The existence of a person", "Human faith"], answer: 3 },
        { question: "Doubts in varying degrees the existence of knowledge and reality", options: ["Pragmatism", "Empiricism", "Skepticism", "Rationalism", "Solipsism"], answer: 2 },
        { question: "An integral view on reality, a belief system, a person's attitude to what he considers the most important:", options: ["opinion", "approach", "worldview", "life stance", "life style"], answer: 3 },
        { question: "Who introduced the concept of \"archetype\" into psychoanalysis:", options: ["E. Fromm", "Z. Freud", "F. Nietzsche", "A. Schopenhauer", "K. Jung"], answer: 4 },
        { question: "The author of conception “the end of history”:", options: ["M. Weber", "A. Toynbee", "O. Spengler", "F. Fukuyama", "D. Bell"], answer: 3 },
        { question: "The science of beauty:", options: ["ontology", "ethics", "logic", "axiology", "aesthetics"], answer: 4 },
        { question: "What does the Greek word “logos” mean?", options: ["scientific", "science", "research", "subject", "scientist"], answer: 1 },
        { question: "Western attitude towards Middle Eastern, Asian and African societies that characterizes these societies as static and undeveloped:", options: ["medievistics", "orientalism", "medievalism", "westernism", "occidentalism"], answer: 1 },
        { question: "Immanence idea are known as:", options: ["Adventitious ideas", "Beliefs", "Innate ideas", "Factitious ideas", "rational thoughts"], answer: 2 },
        { question: "The quality or character of a person or thing that makes them different from others is …", options: ["Personality", "Communication", "Stereotype", "There is no correct answer", "Individuality"], answer: 4 },
        { question: "Scientism is:", options: ["The doctrine of the laws of scientific knowledge.", "religious as worldview", "The declaration of science as the highest cultural value,", "Broad criticism of science", "The development of social inequality"], answer: 2 },
        { question: "The subject of the study of social philosophy:", options: ["Consciousness", "Cognition", "Society", "Nature", "Genesis"], answer: 2 },
        { question: "Teaching about God is ----", options: ["Metaphysics", "Theology", "Dialectics", "Mythology", "History"], answer: 1 },
        { question: "class struggle is a principle of", options: ["Marxism", "Pragmatism", "Existentialism", "Structuralism", "Intuitionism"], answer: 0 },
        { question: "In the philosophy of science, the problem of distinguishing the science and non-science:", options: ["proliferation", "falsification", "verification", "demarcation", "negative heuristics"], answer: 3 },
        { question: "Philosophical term of ethics", options: ["reflection", "sense", "imagination", "moral", "perception"], answer: 3 },
        { question: "The purification and purgation of emotions through dramatic art, or any extreme emotional state that results in renewal and restoration:", options: ["mimesis", "catalepsy", "ataraxy", "phronesis", "catharsis"], answer: 4 },
        { question: "Position, which is based on an idea of scientific knowledge as a high cultural value and sufficient condition for human orientation in the world:", options: ["agnosticism", "anti-scientism", "secularism", "voluntarism", "scientism"], answer: 4 },
        { question: "The normative ethical position that moral agents ought to act in their own self-interest:", options: ["ethical egoism", "psychological egoism", "amorality", "immorality", "rational egoism"], answer: 0 },
        { question: "For Hegel, Absolute Idea develops over time in a series of dialectic movements from ______", options: ["Unity + struggle = opposites", "Quantitative + qualitative = certain limit", "Own self + not-self = Absolute Idea", "Affirmation + Negation", "Thesis + antithesis = synthesis"], answer: 4 },
        { question: "The concept used in the logic and methodology of science to denote the process of establishing the truth of scientific statements as a result of their empirical verification:", options: ["Demarcation", "Falsification", "Hypothesis", "The concept", "Verification"], answer: 4 },
        { question: "“Knowledge comes only or primarily from sensory experience”:", options: ["skepticism", "rationalism", "agnosticism", "phenomenology", "empiricism"], answer: 4 },
        { question: "Transition from the general to the specific knowledge:", options: ["induction", "analysis", "deduction", "abstracting", "synthesis"], answer: 2 },
        { question: "Protagoras is the author of remark:", options: ["man is the measure of all things", "man is a social animal", "man is a bizarre creature", "man is a superman", "man is a political animal"], answer: 0 },
        { question: "Suffering and evil deal with:", options: ["ahimsa", "nirvana", "Brahmin", "moksha", "samsara"], answer: 4 },
        { question: "“Don’t harm the living, sentient beings” is the commandment of:", options: ["ahimsa", "moksha", "samsara", "karma", "nirvana"], answer: 0 },
        { question: "“Motion is unthinkable” – assumed:", options: ["Thales", "Heraclitus of Ephesus", "Zeno of Elea", "Diogenes of Sinope", "Pythagoras of Samos"], answer: 2 },
        { question: "“Maieutics” is the method of:", options: ["Plato", "Protagoras", "Socrates", "Zeno", "Heraclitus"], answer: 2 },
        { question: "According to Parmenides, being is:", options: ["eternal, invariable, united", "ideal, eternal, multiple", "the unity of the spiritual and material", "material, variable, ultimate", "invariable, plural"], answer: 0 },
        { question: "According to al-Farabi, the ideal of society:", options: ["city of the sun", "city of panic", "virtuous city", "city of ambition", "city of freedom and collectivity"], answer: 2 },
        { question: "Rational knowledge includes:", options: ["concept, judgment, conclusion", "analogy, hypothesis, ordering", "induction, deduction generalization", "intuition, reason, mind", "sensation, perception, representation"], answer: 0 },
        { question: "In ancient Greek philosophy, the impossibility of think about motion has been proven in:", options: ["Aristotelian syllogisms", "Zeno’s paradoxes", "Pythagorean proves", "Socrates’ definitions", "Plato's dialogues"], answer: 1 },
        { question: "Materialistic school in ancient Indian philosophy:", options: ["Charvaka", "Buddhism", "Yoga", "Upanishads", "Jainism"], answer: 0 },
        { question: "“Cognition is the recollection of the ideas that soul had once beheld”, affirms:", options: ["Epicurus", "Aristotle", "Plato", "Socrates", "Pythagoras"], answer: 2 },
        { question: "In Hellenistic philosophy the word “ataraxia” means:", options: ["equanimity, impassivity", "heartlessness", "fatigue, tiredness", "wisdom", "activity and creativity"], answer: 0 },
        { question: "In ancient times the concept “physis” meant:", options: ["nature", "society", "psyche", "state", "human being"], answer: 0 },
        { question: "To the question: 'What is difficult?' Thales replied:", options: ["to know God", "to know thyself", "to give advices to others", "to know the essence of things", "to overcome the need"], answer: 1 },
        { question: "Any change, transformation, and process is:", options: ["motion", "evolution", "involution", "development", "progress"], answer: 0 },
        { question: "Category, reflecting the external, sensibly perceived sides of objects and processes:", options: ["phenomenon", "image", "configuration", "profile", "shape"], answer: 0 },
        { question: "The negation of the causality principle:", options: ["determinism", "agnosticism", "indeterminism", "fatalism", "idealism"], answer: 2 },
        { question: "The science on forms, laws and ways of thinking:", options: ["logic", "axiology", "ontology", "epistemology", "logistics"], answer: 0 },
        { question: "'Everything flows', there is nothing constant in the universe, considered:", options: ["Thales", "Anaximander", "Democritus", "Heraclitus", "Protagoras"], answer: 3 },
        { question: "The expression “One cannot enter into the same river even once” is…", options: ["relativism", "sophism", "skepticism", "pessimism", "agnosticism"], answer: 0 },
        { question: "The form of empirical cognition:", options: ["judgment", "hypothesis", "observation", "syllogism", "theory"], answer: 2 },
        { question: "The basis for regulation of human behavior, according to legalism:", options: ["cruel laws", "custom", "tradition", "ritual", "morality"], answer: 0 },
        { question: "The expression “Everything I say is false” is…", options: ["truth", "sophism", "wordplay", "deception", "error"], answer: 1 },
        { question: "School of thought that questions the possibility of certainty in knowledge:", options: ["skepticism", "pessimism", "optimism", "realism", "nominalism"], answer: 0 },
        { question: "Ancient philosopher, who recognized water, earth, fire and air as a system of world’s eternal elements and forces:", options: ["Epicurus", "Empedocles", "Anaximenes", "Anaximander", "Heraclitus"], answer: 1 },
        { question: "Which Pre-Socratic philosopher claimed everything was made of atoms?", options: ["Parmenides", "Thales", "Pythagoras", "Democritus", "Heraclitus"], answer: 3 },
        { question: "What is the translation of the word “religio” from Latin?", options: ["bind, connect", "person", "faith, cult", "worshiping", "idol"], answer: 0 },
        { question: "According to .. all phenomena in the world are planned in advance and the possibility of change is rejected", options: ["fatalism", "determinism", "formalism", "indeterminism", "providentialism"], answer: 0 },
        { question: "Christian world outlook stands for the idea of creation of the world out of nothing. It is …..", options: ["Theocentrism", "Faith", "Spirituality", "Symbolism", "Creationism"], answer: 4 },
        { question: "The belief that God is present in all things of nature", options: ["Pantheism", "Syncretism", "Animism", "Theology", "Anthropology"], answer: 0 },
        { question: "View that after the death the human beings live again in other forms. What is this?", options: ["Reincarnation", "Fetishism", "Animism", "Religion", "Syncretism"], answer: 0 },
        { question: "is the belief in and worship of controlling power,", options: ["Religion", "Culture", "Science", "Art", "Game"], answer: 0 },
        { question: "The famous words 'Language is the house of being' belong to:", options: ["K. Jaspers", "M. Heidegger", "J.-P. Sartre", "A. Camus", "K. Popper"], answer: 1 },
        { question: "Who claimed 'God is dead and we killed him'?", options: ["Nietzsche", "Kierkegaard", "Schopenhauer", "Marx", "Freud"], answer: 0 },
        { question: "The application of knowledge to reach practical goals in a reproducible way and also the product of such an endeavor:", options: ["reproduction", "technology", "qualification", "production", "quantification"], answer: 1 },
        { question: "In the ontology, what does the Greek word 'ontos' mean?", options: ["being", "knowledge", "consciousness", "cognition", "dialectics"], answer: 0 },
        { question: "The statement 'If existence really precedes essence, then a person is responsible for what he is' characterizes:", options: ["philosophy of life", "existentialism", "psychoanalysis", "Philosophical anthropology", "Pragmatism"], answer: 1 },
        { question: "Lewis Mumford considers a strongly hierarchical, technocratic organization of society as…", options: ["technopark", "megamachine", "coordination", "technicism", "compunication"], answer: 1 },
        { question: "Who is a philosopher?", options: ["person primarily interested in the truth about moral matters", "Someone who studies the stars and planets", "A clever and tricky arguer", "A person that attempt to resolve any questions", "Lover and pursuer of wisdom"], answer: 4 },
        { question: "A system of philosophy that recognize only things that can be scientifically or logically proved is ----", options: ["Existentialism", "Positivism", "Nihilism", "There is no correct answer", "Romanticism"], answer: 1 },
        { question: "The will to power is the central category of", options: ["There is no correct answer", "Nietzsche", "Freud", "Marx", "Yung"], answer: 1 },
        { question: "What principle is opposite to verification?", options: ["generalization", "falsification", "regeneration", "stimulation", "verification"], answer: 1 },
        { question: "A person who behaves in a way that is acceptable by most people and who avoids doing things that could be considered different or unusual:", options: ["follower", "proponent", "conformist", "adherent", "supporter"], answer: 2 }
    ];

    /* ------------------------------------------------------------------
       Объединяем массивы: prependQuestions идут первыми
       ------------------------------------------------------------------ */
    const allQuestions = [...prependQuestions, ...existingQuestions];

    /* ------------------------------------------------------------------
       Приложение: состояние, UI и логика
       - блоки формируются автоматически по указанному пользователем размеру
       - добавлена локальная таблица лидеров (localStorage)
       - очки начисляются за правильные ответы в обычных раундах, не учитываются при работе над ошибками
       ------------------------------------------------------------------ */

    let blocks = [];
    let currentBlockIndex = 0;
    let questionsForThisRound = [];
    let currentQuestionIndex = 0;
    let userAnswers = []; // answers of current round
    let isErrorCorrectionRound = false; // don't count points during error correction
    let sessionScore = 0; // points earned in this player session (only normal rounds)
    let currentPlayer = 'Anonymous';

    const startScreen = document.getElementById('start-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultsScreen = document.getElementById('results-screen');

    const startBtn = document.getElementById('start-quiz-btn');
    const progressText = document.getElementById('progress-text');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');

    const resultsTitle = document.getElementById('results-title');
    const resultsMessage = document.getElementById('results-message');
    const resultsNextBtn = document.getElementById('results-next-btn');
    const resultsRestartBtn = document.getElementById('results-restart-btn');
    const sessionSummary = document.getElementById('session-summary');

    const playerNameInput = document.getElementById('player-name');
    const leaderboardEl = document.getElementById('leaderboard');
    const refreshLeaderboardBtn = document.getElementById('refresh-leaderboard');
    const resetLeaderboardBtn = document.getElementById('reset-leaderboard');
    const blockSizeInput = document.getElementById('block-size-input');

    const currentPlayerEl = document.getElementById('current-player');
    const sessionScoreEl = document.getElementById('session-score');
    const quitBtn = document.getElementById('quit-btn');
    const nextBlockBtn = document.getElementById('next-block-btn');

    const RESULTS_KEY = 'philosophy_quiz_scores_v1'; // localStorage key

    function showScreen(screenId) {
        [startScreen, quizScreen, resultsScreen].forEach(s => s.classList.add('hidden'));
        document.getElementById(screenId).classList.remove('hidden');
        document.getElementById(screenId).classList.add('visible');
    }

    function loadLeaderboard() {
        try {
            const raw = localStorage.getItem(RESULTS_KEY) || '{}';
            return JSON.parse(raw);
        } catch (e) {
            console.error('Failed to parse leaderboard', e);
            return {};
        }
    }

    function saveLeaderboard(lb) {
        localStorage.setItem(RESULTS_KEY, JSON.stringify(lb));
    }

    function renderLeaderboard() {
        const lb = loadLeaderboard();
        const entries = Object.entries(lb);
        if (entries.length === 0) {
            leaderboardEl.innerHTML = '<div class="text-gray-500">Таблица пуста</div>';
            return;
        }
        entries.sort((a,b) => b[1] - a[1]); // desc
        const list = entries.map(([name,score], idx) => `<div class="py-1 ${idx%2? 'bg-white':'bg-gray-50'} px-2 rounded"><strong>${name}</strong>: ${score} очк.</div>`).join('');
        leaderboardEl.innerHTML = list;
    }

    function resetLeaderboard() {
        if (!confirm('Сбросить все локальные очки? Это действие нельзя отменить.')) return;
        localStorage.removeItem(RESULTS_KEY);
        renderLeaderboard();
    }

    function addPointsToLeaderboard(player, points) {
        if (!player) player = 'Anonymous';
        const lb = loadLeaderboard();
        lb[player] = (lb[player] || 0) + points;
        saveLeaderboard(lb);
    }

    function initBlocks(blockSize) {
        blocks = [];
        for (let i = 0; i < allQuestions.length; i += blockSize) {
            blocks.push(shuffleArray(allQuestions.slice(i, i + blockSize)));
        }
    }

    function shuffleArray(arr) {
        // simple Fisher-Yates shuffle to vary questions per block
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    }

    function startBlock(blockIndex) {
        currentBlockIndex = blockIndex;
        questionsForThisRound = [...blocks[currentBlockIndex]];
        currentQuestionIndex = 0;
        userAnswers = [];
        isErrorCorrectionRound = false;
        showScreen('quiz-screen');
        currentPlayerEl.textContent = currentPlayer;
        sessionScoreEl.textContent = sessionScore;
        displayQuestion();
    }

    function startErrorCorrection() {
        const incorrectQuestions = userAnswers.filter(a => !a.isCorrect).map(a => a.question);
        if (incorrectQuestions.length === 0) {
            // nothing to correct
            showResults();
            return;
        }
        questionsForThisRound = incorrectQuestions;
        currentQuestionIndex = 0;
        userAnswers = [];
        isErrorCorrectionRound = true;
        showScreen('quiz-screen');
        displayQuestion();
    }

    function displayQuestion() {
        if (currentQuestionIndex >= questionsForThisRound.length) {
            showResults();
            return;
        }

        const q = questionsForThisRound[currentQuestionIndex];
        progressText.innerText = `Блок ${currentBlockIndex + 1} | Вопрос ${currentQuestionIndex + 1} из ${questionsForThisRound.length}`;
        questionText.innerText = q.question;

        optionsContainer.innerHTML = '';
        q.options.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.type = 'button';
            btn.innerText = `${String.fromCharCode(65 + idx)}) ${opt}`;
            btn.className = "w-full p-3 border rounded text-left hover:bg-gray-100";
            btn.dataset.index = idx;
            btn.onclick = () => handleAnswer(idx);
            optionsContainer.appendChild(btn);
        });
    }

    function handleAnswer(selectedIdx) {
        const q = questionsForThisRound[currentQuestionIndex];
        const isCorrect = selectedIdx === q.answer;
        userAnswers.push({ question: q, selected: selectedIdx, isCorrect });

        // Visual feedback
        const buttons = optionsContainer.querySelectorAll('button');
        buttons.forEach(btn => {
            btn.disabled = true;
            const idx = Number(btn.dataset.index);
            if (idx === q.answer) {
                btn.classList.add('bg-green-100', 'border-green-400');
            } else if (idx === selectedIdx) {
                btn.classList.add('bg-red-100', 'border-red-400');
            } else {
                btn.classList.add('opacity-60');
            }
        });

        // If in normal round (not error correction) and correct, increment session and global score
        if (!isErrorCorrectionRound && isCorrect) {
            sessionScore += 1;
            sessionScoreEl.textContent = sessionScore;
            addPointsToLeaderboard(currentPlayer, 1);
            renderLeaderboard();
        }

        // next button
        const nextBtn = document.createElement('button');
        nextBtn.innerText = "Далее →";
        nextBtn.className = "w-full mt-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700";
        nextBtn.onclick = () => {
            currentQuestionIndex++;
            displayQuestion();
        };
        optionsContainer.appendChild(nextBtn);
    }

    function showResults() {
        const correctCount = userAnswers.filter(a => a.isCorrect).length;
        const total = userAnswers.length;
        const incorrectCount = total - correctCount;

        showScreen('results-screen');

        if (!isErrorCorrectionRound) {
            resultsTitle.innerText = `Результаты — Блок ${currentBlockIndex + 1}`;
        } else {
            resultsTitle.innerText = `Работа над ошибками — Блок ${currentBlockIndex + 1}`;
        }

        if (incorrectCount === 0 && !isErrorCorrectionRound) {
            resultsMessage.innerText = `Отлично! Вы ответили правильно на все ${total} вопросов блока.`;
        } else if (incorrectCount === 0 && isErrorCorrectionRound) {
            resultsMessage.innerText = `Ошибки исправлены. Все ответы верны.`;
        } else {
            resultsMessage.innerText = `Правильно: ${correctCount} из ${total}. Ошибок: ${incorrectCount}.`;
        }

        // Session summary
        sessionSummary.innerHTML = `
        <div>Игрок: <strong>${currentPlayer}</strong></div>
        <div>Очков в сессии: <strong>${sessionScore}</strong></div>
        <div>Правильных ответов в этом раунде: <strong>${correctCount}</strong> из ${total}</div>
        <div>Режим: <strong>${isErrorCorrectionRound ? 'Работа над ошибками — очки не начисляются' : 'Обычный раунд — очки начисляются'}</strong></div>
    `;

        // Controls
        resultsNextBtn.classList.remove('hidden');
        resultsRestartBtn.classList.add('hidden');

        if (!isErrorCorrectionRound && incorrectCount > 0) {
            // offer "работа над ошибками"
            resultsNextBtn.innerText = 'Начать работу над ошибками';
            resultsNextBtn.onclick = () => startErrorCorrection();
        } else {
            // Normal flow: if there are more blocks -> go to next block; else finish
            if (currentBlockIndex < blocks.length - 1) {
                resultsNextBtn.innerText = `Перейти к Блоку ${currentBlockIndex + 2}`;
                resultsNextBtn.onclick = () => startBlock(currentBlockIndex + 1);
            } else {
                resultsNextBtn.innerText = 'Квиз завершен — в меню';
                resultsNextBtn.onclick = () => {
                    showScreen('start-screen');
                    resultsNextBtn.innerText = 'Далее';
                };
            }
        }
    }

    /* ---------- UI wiring ---------- */

    startBtn.addEventListener('click', () => {
        currentPlayer = (playerNameInput.value || 'Anonymous').trim();
        if (currentPlayer.length === 0) currentPlayer = 'Anonymous';
        sessionScore = 0;
        currentPlayerEl.textContent = currentPlayer;
        sessionScoreEl.textContent = sessionScore;

        const blockSize = Math.max(5, Math.min(50, Number(blockSizeInput.value) || 20));
        initBlocks(blockSize);
        renderLeaderboard();
        startBlock(0);
    });

    refreshLeaderboardBtn.addEventListener('click', renderLeaderboard);
    resetLeaderboardBtn.addEventListener('click', resetLeaderboard);

    quitBtn.addEventListener('click', () => {
        if (!confirm('Выйти в меню? Прогресс текущего раунда потеряется.')) return;
        showScreen('start-screen');
    });

    resultsRestartBtn.addEventListener('click', () => {
        sessionScore = 0;
        playerNameInput.value = '';
        showScreen('start-screen');
    });

    /* Initialize UI and leaderboard on load */
    (function init() {
        renderLeaderboard();
        sessionSummary.innerHTML = '';
    })();
</script>
</body>
</html>
